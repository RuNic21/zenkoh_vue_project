---
alwaysApply: true
description: コーディングスタイルガイド（日本語）
---

# コーディングスタイルガイド（日本語）

## 基本ルール
- すべてのコードに日本語コメントを追加する（なぜ/意図を中心に）
- 変数名・関数名は意味が明確で読みやすく
- 例外やエラーの可能性を事前に考慮し、安全に実装
- 画面に表示されるテキストは日本語で統一
- コードに対するコメントは日本語で統一

## JavaScript/TypeScript スタイル
- セミコロン(;)を常に使用
- 文字列はダブルクォート("")を使用
- import/export でもダブルクォートを使用
- インデントは既存スタイルに合わせる（混在させない）

## Vue コンポーネントスタイル
- すべて `<script setup>` を推奨
- props/emit には用途が分かる日本語コメントを付与
- テンプレートにはセクションごとに HTML コメントで意図を明記
- スタイルは関連箇所のみ `scoped`。Material Dashboard のクラスを優先

## ファイル構造の参照
- [src/main.js](mdc:src/main.js): エントリーポイント（Vue Router・認証システム初期化）
- [src/App.vue](mdc:src/App.vue): ルートコンポーネント（router-view）
- [src/layouts/MainLayout.vue](mdc:src/layouts/MainLayout.vue): メインレイアウト
- [src/router/index.ts](mdc:src/router/index.ts): Vue Router 設定
- [src/pages/](mdc:src/pages/): ページコンポーネント（9つのページ）
  - DashboardPage.vue, LoginPage.vue, SignUpPage.vue
  - ScheduleList.vue, ScheduleDetail.vue
  - ProjectManagement.vue, ProjectDetail.vue
  - TeamManagement.vue, ReportPage.vue
- [src/components/](mdc:src/components/): 再利用コンポーネント
- [src/composables/](mdc:src/composables/): Composition API 関数
- [src/services/](mdc:src/services/): データベース・API サービス（12個の専門サービス）
- [src/store/](mdc:src/store/): 状態管理
- [src/types/](mdc:src/types/): TypeScript 型定義
- [src/utils/](mdc:src/utils/): ユーティリティ関数
- [src/constants/](mdc:src/constants/): 定数定義
- [src/assets/](mdc:src/assets/): 画像/CSS/JS 等のアセット

## 新機能開発ガイドライン

### 1. ページコンポーネント作成
```vue
<script setup lang="ts">
// ページの目的を簡潔に説明
// 例: プロジェクト管理ページ: プロジェクトの一覧表示・作成・編集・削除機能

import { ref, computed, onMounted } from "vue";
import { useScheduleStore } from "@/store/schedule";
import { fetchProjectProgress } from "@/services/dashboardService";

// 必要な型をインポート
import type { Project, User, Task } from "@/types";

// リアクティブデータ
const projects = ref<Project[]>([]);
const isLoading = ref(false);

// メソッド
const loadProjects = async () => {
  // データ読み込み処理
};

// ライフサイクル
onMounted(() => {
  loadProjects();
});
</script>

<template>
  <!-- ページの役割を説明 -->
  <div class="page-container">
    <!-- ヘッダーセクション -->
    <div class="page-header">
      <h3>ページタイトル</h3>
      <p>ページの説明</p>
    </div>
    
    <!-- メインコンテンツ -->
    <div class="page-content">
      <!-- コンテンツ -->
    </div>
  </div>
</template>

<style scoped>
/* 必要な範囲のみスタイルを適用 */
</style>
```

### 2. サービス関数作成
```typescript
// src/services/[serviceName]Service.ts
import { supabase } from "./supabaseClient";
import type { [TypeName] } from "@/types/[typeName]";

/**
 * [機能名]を取得する
 * @param params 取得パラメータ
 * @returns [戻り値の説明]
 */
export async function list[Items](
  params?: [ParamsType]
): Promise<[ItemType][] | null> {
  try {
    const { data, error } = await supabase
      .from("[table_name]")
      .select("*")
      .eq("condition", params?.value);
    
    if (error) {
      console.error("[機能名]取得に失敗:", error.message);
      return null;
    }
    
    return data as [ItemType][];
  } catch (e) {
    const msg = e instanceof Error ? e.message : String(e);
    console.error("予期せぬエラー:", msg);
    return null;
  }
}
```

### 3. 型定義作成
```typescript
// src/types/[typeName].ts
export interface [TypeName] {
  id: number;
  name: string;
  description?: string;
  createdAt: string;
  updatedAt: string;
}

export type [TypeName]Status = "active" | "inactive" | "pending";
export type [TypeName]Priority = "low" | "medium" | "high" | "urgent";

export interface [TypeName]Create {
  name: string;
  description?: string;
}

export interface [TypeName]Update {
  id: number;
  name?: string;
  description?: string;
}
```

### 4. ユーティリティ関数作成
```typescript
// src/utils/[utilityName].ts
/**
 * [機能の説明]
 * @param param パラメータの説明
 * @returns 戻り値の説明
 */
export function [functionName](param: [ParamType]): [ReturnType] {
  // 実装
}

/**
 * [機能の説明]（非同期版）
 */
export async function [asyncFunctionName](
  param: [ParamType]
): Promise<[ReturnType]> {
  try {
    // 実装
  } catch (error) {
    console.error("[機能名]でエラー:", error);
    throw error;
  }
}
```
